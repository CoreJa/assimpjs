<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no">

	<title>AssimpJS Demo</title>
	<script type="text/javascript" src="assimpjs.js"></script>
	<style>
		textarea
		{
			width: 90%;
			height: 500px;
			box-sizing: border-box;
		}
	</style>
	
	<script type='text/javascript'>
		window.onload = function () {
			let textArea = document.getElementById ('result_json');
			assimpjs ().then (function (ajs) {
				fetch ('testfiles/cube_with_materials.3ds').then ((response) => {
					return response.arrayBuffer ();
				}).then ((arrayBuffer) => {
					let fileList = new ajs.FileList ();
					let fileBuffer = new Uint8Array (arrayBuffer, 0, arrayBuffer.byteLength);
					fileList.AddFile ('cube_with_materials.3ds', fileBuffer);
					let result = ajs.ImportFile (fileList);
					let resultJson = JSON.parse (result);
					textArea.value = JSON.stringify (resultJson, null, 4);
				});
			});
		};
	</script>
</head>

<body>
	<textarea id="result_json"></textarea>
</body>

</html>
